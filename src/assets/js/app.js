// Import SCSS
// import '../css/style.scss';

/**
 * [TEMP] Essential Icons
 * FIXME: Implement a better way for icons
 */
const svgSupportHand = `<svg xmlns="http://www.w3.org/2000/svg" class="hand" width="60" height="72" viewBox="0 0 60 72" fill="none">
<g filter="url(#filter0_d_729_99)">
  <path d="M46.439 21.2103C46.2192 21.0261 45.9784 20.8512 45.7026 20.6794C45.4539 20.5236 45.2062 20.3658 44.959 20.2095C44.2415 19.7527 43.4989 19.2809 42.7286 18.8451C42.1917 18.5415 41.6526 18.3037 41.1318 18.0754C40.9208 17.9822 40.7084 17.8894 40.4992 17.7922L38.9864 17.0908L38.9636 17.1447C37.582 16.2247 36.0278 15.4686 34.3314 14.8962C33.915 14.7563 33.5229 14.6871 33.1421 14.622C33.0005 14.5975 32.8555 14.5727 32.7069 14.5426L32.6284 14.4934C32.5369 14.436 32.4587 14.3834 32.3875 14.3364C32.2059 14.2161 32.0173 14.0903 31.7835 13.9794C31.4359 13.8128 31.0907 13.6436 30.7435 13.4735C29.757 12.9887 28.7371 12.4884 27.673 12.0644C26.6988 11.6757 25.665 11.5444 24.8335 11.438C24.4263 11.3857 24.0556 11.4062 23.7219 11.4878C23.5531 11.371 23.3644 11.2582 23.1539 11.1485C21.5141 10.2971 19.6709 9.70371 17.6746 9.38563C16.2679 9.16182 15.1358 9.80382 14.6449 11.1059C14.5456 11.3712 14.4443 11.6357 14.343 11.9001C13.8904 13.0875 13.4218 14.3164 13.0466 15.5809C12.6972 16.7597 12.4862 17.9495 12.2829 19.1023L12.2061 19.5365C12.1211 20.011 12.1915 20.4221 12.2588 20.7401C11.4239 21.1206 10.8562 21.7881 10.5401 22.7582C10.2455 23.6619 9.92815 24.5837 9.62061 25.4742C9.20088 26.6934 8.76474 27.9526 8.37439 29.2162C7.56506 31.8351 7.35824 34.0692 7.72679 36.247C7.97576 37.7182 8.74491 38.9421 10.0134 39.884C10.7215 40.4091 11.4485 40.9143 12.1498 41.4029C12.5054 41.6495 12.8615 41.8975 13.2152 42.148C15.062 43.453 16.908 44.7601 18.7548 46.0651C20.4961 47.2967 22.238 48.5298 23.9808 49.7608C24.4757 50.1107 24.5968 50.383 24.6478 50.5804C24.9135 51.628 25.1519 52.6857 25.33 53.4894C25.5966 54.6959 25.857 55.9031 26.1193 57.1112L26.7679 60.1073C27.0242 61.2899 27.2785 62.4717 27.5391 63.6528C27.6332 64.0796 27.7349 64.5004 27.8426 64.9465C27.8924 65.154 27.9448 65.3687 27.998 65.5945L28.3804 67.202L29.9865 66.7632C30.1336 66.7223 30.2703 66.6885 30.3992 66.6559C30.7047 66.5781 30.9944 66.5061 31.3053 66.3939C33.3976 65.6374 35.4787 64.8769 37.4697 64.1477C37.8754 63.9991 38.2782 63.8516 38.6752 63.7062C39.234 63.5016 39.6631 63.247 39.9692 62.9383C39.9888 62.9247 40.0078 62.9096 40.0292 62.892C40.9114 62.1353 42.4907 61.7128 43.9643 61.6409L43.9645 61.6327C44.263 61.6159 44.5603 61.5558 44.849 61.45C44.9472 61.4141 45.0452 61.3733 45.1397 61.3273C45.6142 61.0983 46.1092 60.8716 46.5879 60.654C47.2558 60.3494 47.9471 60.0328 48.6285 59.6891C49.6005 59.2 49.7963 58.0758 49.833 57.7424C49.8955 57.1754 49.6972 56.7235 49.5921 56.481C49.5807 56.4543 49.5683 56.4296 49.5626 56.4139C48.9485 54.5761 48.2436 52.7587 47.5607 51.0014C46.8182 49.0857 46.0492 47.1065 45.4165 45.1376C45.3407 44.9039 45.3772 44.8336 45.422 44.7458C46.6623 42.3378 47.1643 39.6398 46.9125 36.7258C46.7617 34.9815 46.5065 33.243 46.2592 31.5617C46.1763 30.9911 46.0914 30.4196 46.012 29.8494C45.9561 29.4509 45.8628 29.0888 45.7655 28.707C45.7227 28.5408 45.6771 28.3626 45.632 28.168L45.4103 27.2227C45.9585 26.3187 46.5015 25.4183 47.0367 24.5011C47.7314 23.3129 47.513 22.113 46.439 21.2103Z" fill="white"/>
  <path d="M17.0043 27.7826C17.3551 28.8478 18.2206 29.6239 18.743 30.6344C18.4262 31.504 17.0949 31.5531 16.9449 32.6994C18.0825 32.9129 19.1709 33.0503 20.2542 32.9589C22.1632 32.7973 23.7579 33.4184 25.1608 34.6424C27.2251 36.4427 29.3068 38.2237 31.3527 40.0454C32.5054 41.0736 33.6171 42.1509 34.4777 43.45C34.8713 44.0465 34.8541 44.2006 34.3009 44.6484C34.0041 44.8887 33.6952 45.1139 33.3823 45.3324C33.0145 45.5889 32.8607 45.9246 32.9051 46.4573C33.548 46.29 34.1445 46.1349 34.8023 45.9638C34.9151 46.2717 35.0188 46.4968 35.081 46.7339C35.5754 48.6203 36.0568 50.5115 36.5517 52.3994C37.0641 54.362 37.5824 56.3226 38.1055 58.2829C38.3285 59.1156 38.5608 59.9465 38.8109 60.7726C39.0873 61.688 39.0103 61.8803 38.1252 62.2044C35.6722 63.1028 33.2178 64.0016 30.7611 64.89C30.4117 65.0179 30.0404 65.0906 29.5686 65.2195C29.4004 64.5145 29.2481 63.9109 29.1142 63.3038C28.7445 61.6235 28.3834 59.94 28.0194 58.2575C27.6493 56.5497 27.2842 54.8417 26.9069 53.1365C26.6875 52.1482 26.4617 51.1606 26.2137 50.1795C26.0246 49.4351 25.5414 48.8893 24.9227 48.4517C21.334 45.9136 17.7467 43.375 14.158 40.8369C13.1012 40.0886 12.0248 39.3671 10.9859 38.5961C10.1043 37.9412 9.51097 37.0947 9.32041 35.9708C8.95592 33.8176 9.28514 31.7253 9.9188 29.6775C10.5878 27.5161 11.3774 25.3933 12.0778 23.2414C12.3395 22.4359 12.8026 22.1087 13.67 21.9957C15.5229 21.7524 17.3337 22.0425 19.1575 22.1802C21.1897 22.3325 23.2163 22.5501 25.2445 22.7363C25.9577 22.8015 26.1674 22.9895 26.3252 23.6885C26.4817 24.3799 26.6581 25.0673 26.8239 25.7569C26.9323 26.2093 26.7932 26.5315 26.3576 26.7592C25.1589 27.385 23.99 28.0697 22.7774 28.6664C21.6037 29.2441 20.4422 29.0101 19.3272 28.4472C19.0316 28.2972 18.7632 28.0918 18.4566 27.9702C18.0479 27.8064 17.615 27.7019 17.1935 27.5704L17.0068 27.7849L17.0043 27.7826Z" fill="#C13D44"/>
  <path d="M26.1136 32.8443C27.1331 32.2971 28.1293 32.1646 29.1529 32.1161C32.1079 31.9759 34.9208 32.4805 37.5595 33.8285C38.0129 34.0604 38.4844 34.2612 38.9552 34.4559C39.1134 34.5213 39.3015 34.5207 39.6086 34.5722C40.0801 33.9237 40.5859 33.235 41.084 32.5426C41.8823 31.4317 42.6742 30.3166 43.475 29.2081C43.6165 29.0133 43.7927 28.8416 44.0587 28.5395C44.2031 29.1574 44.3479 29.6111 44.4139 30.0774C44.7298 32.3394 45.1083 34.598 45.3045 36.8729C45.5187 39.3492 45.1497 41.7662 43.986 44.0211C43.7185 44.5381 43.691 45.0533 43.8791 45.634C45.1097 49.4548 46.7576 53.1227 48.031 56.9261C48.1038 57.143 48.2532 57.3676 48.2306 57.5741C48.2036 57.8178 48.0891 58.1667 47.9063 58.258C46.7684 58.8307 45.5921 59.3297 44.444 59.8833C43.6495 60.2669 42.8177 59.9137 42.5383 59.0123C41.9456 57.0986 41.2554 55.2141 40.6462 53.3047C40.1925 51.8825 39.7907 50.4413 39.3857 49.0045C39.0694 47.886 38.7767 46.7605 38.4904 45.6343C38.4296 45.3967 38.4402 45.1394 38.4094 44.8096C39.2805 44.6352 40.1148 44.4676 41.1212 44.2647C36.0537 40.407 31.1111 36.6448 26.1165 32.8432L26.1136 32.8443Z" fill="#222222"/>
  <path d="M35.87 28.4871C35.4513 29.329 35.0189 30.1646 34.6199 31.0156C34.3794 31.526 34.0093 31.6956 33.4591 31.66C31.8666 31.5546 30.2721 31.484 28.6793 31.3869C28.4145 31.3702 28.1524 31.294 27.8857 31.2455C28.0612 29.1267 28.6668 27.1947 29.3095 25.2833C30.3248 22.2609 31.1591 19.1782 32.3641 16.1107C32.8899 16.2186 33.366 16.2667 33.8089 16.4163C35.4794 16.9804 37.0532 17.7456 38.4881 18.771C39.1997 19.2787 39.2572 19.5207 38.9606 20.3115C38.4608 21.6427 37.9565 22.9708 37.4665 24.3066C37.3995 24.4903 37.411 24.7005 37.3857 24.8998C37.0364 25.8105 36.697 26.7257 36.3325 27.6307C36.2113 27.9301 36.0286 28.2048 35.8745 28.4903L35.87 28.4871Z" fill="#009639"/>
  <path d="M35.8701 28.4867C36.0243 28.2012 36.2084 27.9259 36.3281 27.627C36.6926 26.7221 37.0321 25.8069 37.3814 24.8961C38.1745 23.0514 38.9668 21.2086 39.8103 19.2463C40.5185 19.5749 41.2492 19.8578 41.9243 20.2391C42.9163 20.8016 43.8707 21.4314 44.8375 22.0372C45.0308 22.158 45.2186 22.2906 45.3936 22.4377C45.855 22.8258 45.9495 23.1777 45.6424 23.7027C44.8459 25.0647 44.0258 26.411 43.2027 27.7583C42.104 29.5558 40.9841 31.3399 39.8904 33.1421C39.4073 33.9378 39.3565 33.9824 38.5217 33.5897C37.5067 33.112 36.4996 32.6201 35.4959 32.1237C34.9156 31.8359 34.8774 31.6599 35.0897 31.0235C35.3684 30.1841 35.6124 29.3346 35.8711 28.4895L35.8701 28.4867Z" fill="#009639"/>
  <path d="M13.9256 20.8332C13.8762 20.4794 13.739 20.1269 13.7969 19.8068C14.0234 18.5383 14.2325 17.2583 14.5979 16.0249C15.0354 14.5459 15.6135 13.1064 16.1584 11.6611C16.3852 11.06 16.7707 10.8652 17.414 10.9674C19.1599 11.2456 20.8347 11.7545 22.4035 12.5686C23.2912 13.0296 23.3853 13.242 23.1564 14.1996C22.7043 16.0948 22.2473 17.9902 21.781 19.8826C21.5664 20.7586 21.3115 20.9478 20.391 20.9471C18.4658 20.944 16.5406 20.9361 14.6138 20.9239C14.4383 20.9232 14.2651 20.8794 13.9236 20.8323L13.9256 20.8332Z" fill="#009639"/>
  <path d="M31.7618 15.8474C31.5428 16.613 31.3488 17.3174 31.1393 18.0194C30.4571 20.3059 29.7656 22.5893 29.0888 24.877C28.9449 25.3649 28.6851 25.6794 28.1007 25.6887C27.8243 24.9341 27.5474 24.1779 27.271 23.4233C27.2537 23.376 27.2586 23.3222 27.2485 23.2723C26.9745 21.9922 26.8505 21.8817 25.5781 21.7159C24.6978 21.6014 23.8186 21.4719 22.9389 21.3458C22.2164 21.2418 22.1512 21.1666 22.2814 20.4758C22.6996 18.26 23.1252 16.0464 23.5595 13.8344C23.6904 13.1677 23.9365 12.9412 24.6197 13.0271C25.4458 13.1322 26.3013 13.2461 27.0647 13.5512C28.4339 14.0973 29.7456 14.7863 31.0759 15.423C31.2782 15.5194 31.4594 15.6609 31.7589 15.8484L31.7618 15.8474Z" fill="#009639"/>
  <path d="M27.3755 27.6797C27.3854 27.9391 27.444 28.1483 27.3924 28.3248C27.1882 29.0281 26.9718 29.7293 26.7131 30.4136C26.5757 30.7806 26.3196 30.9979 25.8428 30.9971C24.2336 30.9936 22.6232 31.054 21.0122 31.0771C20.8835 31.0788 20.7549 30.9781 20.5028 30.8755C20.7558 30.739 20.8923 30.6111 21.0401 30.5943C22.7255 30.4123 24.0494 29.4532 25.4135 28.5817C25.9892 28.2134 26.543 27.8075 27.3736 27.6788L27.3755 27.6797Z" fill="black"/>
</g>
<defs>
  <filter id="filter0_d_729_99" x="5.55054" y="9.3418" width="46.2944" height="61.8604" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
	<feFlood flood-opacity="0" result="BackgroundImageFix"/>
	<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
	<feOffset dy="2"/>
	<feGaussianBlur stdDeviation="1"/>
	<feComposite in2="hardAlpha" operator="out"/>
	<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.16 0"/>
	<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_729_99"/>
	<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_729_99" result="shape"/>
  </filter>
</defs>
</svg>`;

const svgArrow = `<svg xmlns="http://www.w3.org/2000/svg" class="arrow" width="9" height="16" viewBox="0 0 9 16" fill="none">
<path d="M0.717514 1.00026L7.43503 7.71777L0.717514 14.4353" stroke="#F9F9F9" stroke-width="2"/>
</svg>`;

// Stats will be updated from an external API
const statsData = [];

const baseAPIURL = 'https://get-pal-stats-live-api.onrender.com';
const baseImgURL = 'https://elharony.com/public/stats-icons/';
const repoURL = 'https://github.com/webkeyz/stand-with-palestine';

// Initialize Palestine Banner
const palestineBannerWrapper = document.createElement('section');
palestineBannerWrapper.id = 'free-palestine-widget';
document.body.insertBefore(palestineBannerWrapper, document.body.firstChild);

// Create the main palestineBanner
const palestineBanner = document.createElement('section');
palestineBanner.id = 'free-palestine-banner';
palestineBannerWrapper.appendChild(palestineBanner);

// 1. Create flag element
// FIXME: Replace with the design's flag
const flag = document.createElement("img");
flag.src = 'https://upload.wikimedia.org/wikipedia/commons/0/00/Flag_of_Palestine.svg';
flag.classList.add('logo');
palestineBanner.appendChild(flag);

// 2. Create a Hero element
const heroText = document.createElement('p');
heroText.className = 'hero';
heroText.textContent = 'WE STAND WITH PALESTINE.';
palestineBanner.appendChild(heroText);

// 3. Create the stats wrapper
const statsWrapper = document.createElement('div');
statsWrapper.className = 'stats-wrapper';
palestineBannerWrapper.appendChild(statsWrapper);

const stats = document.createElement('div');
stats.className = 'stats';

// 4. CTA
const cta = document.createElement('a');
cta.className = 'cta';
cta.innerHTML = `${svgSupportHand} ADD TO YOUR WEBSITE ${svgArrow}`;
cta.href = repoURL;
// Open repo in a new tab; Recommended for website's traffic to not override their visit
cta.target = 'blank'; 
palestineBannerWrapper.appendChild(cta);


// Get updated statistics form an external API
fetch(baseAPIURL + '/stats') // Replace with your API URL
	.then((response) => response.json())
	.then((data) => {
		// Update the statsData with the latest data
		statsData.length = 0;
		statsData.push(...data);

		// Update the widget to display the new data
		stats.innerHTML = ''; // Clear the previous data
		statsData.forEach((stat) => {
			const item = document.createElement('div');
			item.className = 'item';

			const icon = document.createElement('img');
			icon.src = baseImgURL + stat.icon;
			icon.className = 'icon';
			icon.alt = 'Stat icon';

			const info = document.createElement('div');
			info.className = 'info';

			const title = document.createElement('p');
			title.className = 'title';
			title.textContent = stat.count + ' ' + stat.title;

			info.appendChild(title);
			item.appendChild(icon);
			item.appendChild(info);
			stats.appendChild(item);
		});

		statsWrapper.appendChild(stats);
	});
